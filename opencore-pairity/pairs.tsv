# buddy_path	opencode_path	priority	notes
packages/buddy/src/tool/tool.ts	packages/opencode/src/tool/tool.ts	P0	tool context and validation wrapper
packages/buddy/src/tool/registry.ts	packages/opencode/src/tool/registry.ts	P0	tool loading, filtering, and model-aware wiring
packages/buddy/src/tool/truncation.ts	packages/opencode/src/tool/truncation.ts	P0	output truncation behavior and limits
packages/buddy/src/tool/task.ts	packages/opencode/src/tool/task.ts	P0	subagent delegation semantics
packages/buddy/src/agent/agent.ts	packages/opencode/src/agent/agent.ts	P0	agent catalog and permission merge logic
packages/buddy/src/permission/next.ts	packages/opencode/src/permission/next.ts	P0	rule evaluation and merge semantics
packages/buddy/src/session/prompt.ts	packages/opencode/src/session/prompt.ts	P0	outer loop orchestration and guardrails
packages/buddy/src/session/processor.ts	packages/opencode/src/session/processor.ts	P0	stream handling and step progression
packages/buddy/src/session/llm.ts	packages/opencode/src/session/llm.ts	P1	LLM call wiring and tool bridge
packages/buddy/src/session/compaction.ts	packages/opencode/src/session/compaction.ts	P1	context compaction behavior
packages/buddy/src/session/instruction.ts	packages/opencode/src/session/instruction.ts	P1	instruction loading and precedence
packages/buddy/src/project/instance.ts	packages/opencode/src/project/instance.ts	P1	instance scoping and lifecycle
packages/buddy/src/storage/db.ts	packages/opencode/src/storage/db.ts	P1	sqlite/drizzle transaction and migration behavior
packages/buddy/src/tool/read.ts	packages/opencode/src/tool/read.ts	P1	core read semantics and truncation interactions
packages/buddy/src/tool/write.ts	packages/opencode/src/tool/write.ts	P1	core write semantics and permission behavior
packages/buddy/src/tool/webfetch.ts	packages/opencode/src/tool/webfetch.ts	P1	web ingest behavior used by research flows
packages/buddy/src/tool/list.ts	packages/opencode/src/tool/ls.ts	P1	listing semantics (OpenCode uses ls.ts)
packages/buddy/src/tool/external-directory.ts	packages/opencode/src/tool/external-directory.ts	P1	external directory enforcement and permission asks
packages/buddy/src/tool/invalid.ts	packages/opencode/src/tool/invalid.ts	P3	fallback tool behavior and unknown tool handling
packages/buddy/src/bus/index.ts	packages/opencode/src/bus/index.ts	P1	event routing semantics and tenant scoping
packages/buddy/src/bus/bus-event.ts	packages/opencode/src/bus/bus-event.ts	P1	event payload schema compatibility
packages/buddy/src/bus/global.ts	packages/opencode/src/bus/global.ts	P1	global bus bridge behavior
packages/buddy/src/routes/global.ts	packages/opencode/src/server/routes/global.ts	P1	SSE contract and heartbeat behavior
packages/buddy/src/routes/session.ts	packages/opencode/src/server/routes/session.ts	P1	session HTTP contract and prompt route semantics
packages/buddy/src/routes/config.ts	packages/opencode/src/server/routes/config.ts	P2	config HTTP contract and provider payload shape
packages/buddy/src/routes/permission.ts	packages/opencode/src/server/routes/permission.ts	P2	permission reply/list route semantics
packages/buddy/src/config/config.ts	packages/opencode/src/config/config.ts	P1	config precedence and load/update behavior
packages/buddy/src/config/markdown.ts	packages/opencode/src/config/markdown.ts	P2	@-reference parsing behavior for prompt inputs
packages/buddy/src/session/system-prompt.ts	packages/opencode/src/session/system.ts	P1	system prompt/environment layering (Buddy adapted naming)
packages/buddy/src/storage/global.ts	packages/opencode/src/global/index.ts	P2	global path/bootstrap behavior
packages/buddy/src/session/message-v2/index.ts	packages/opencode/src/session/message-v2.ts	P2	message-v2 parity anchor (Buddy split into multiple files)
packages/buddy/src/index.ts	packages/opencode/src/index.ts	P3	process bootstrap/wiring entrypoint
packages/buddy/src/flag/flag.ts	packages/opencode/src/flag/flag.ts	P3	feature-flag/env toggle compatibility
packages/buddy/src/project/project.ts	packages/opencode/src/project/project.ts	P2	project identity/worktree semantics
packages/buddy/src/project/project.sql.ts	packages/opencode/src/project/project.sql.ts	P2	project schema compatibility
packages/buddy/src/session/session.sql.ts	packages/opencode/src/session/session.sql.ts	P2	session/message/part schema compatibility
packages/buddy/src/control/control.sql.ts	packages/opencode/src/control/control.sql.ts	P3	control-plane schema compatibility
packages/buddy/src/share/share.sql.ts	packages/opencode/src/share/share.sql.ts	P3	share schema compatibility
packages/buddy/src/storage/schema.ts	packages/opencode/src/storage/schema.ts	P2	schema re-export boundary
packages/buddy/src/storage/schema.sql.ts	packages/opencode/src/storage/schema.sql.ts	P2	shared sql column helpers
